jQuery.fn.extend({nextForm:function(a){return this.each(function(){var b={step:-1,max:2,next:$("<div></div>"),prev:$("<div></div>"),submit:$("<div></div>"),onSubmit:function(){},validate:{},setup:{},_wasSetup:{},that:$(this),actions:{validate:async function(){if(b.validate[b.step]){var c=b.validate[b.step]();if("boolean"==typeof c){if(!1===c)return console.warn("Validation failed on step",b.step),!1;}else if("object"==typeof c)try{var d=await c;if("boolean"!=typeof d)return"undefined"==typeof d||(console.error("Invalid Validation return on step",b.step,"data is not boolean:",d),!1);if(!1===d)return console.warn("Validation failed on step",b.step),!1}catch(f){return console.error("Validation error on step",b.step,"data:",f),!1}}return!0},setupAction:async function(){b.that.collapsible("open",b.step),void 0===b._wasSetup[b.step]&&(b._wasSetup[b.step]=!0,b.setup[b.step]&&(await b.setup[b.step]())),b.actions.setButton()},setButton:function(){function c(d,f){f&&!d.hasClass("disabled")&&d.addClass("disabled"),!f&&d.hasClass("disabled")&&d.removeClass("disabled")}c(b.prev,0>=b.step),c(b.next,b.step>=b.max),c(b.submit,b.step<b.max)},NextAction:async function(){return!!(await b.actions.validate())&&void b.actions.setupAction(++b.step)},PrevAction:async function(){b.actions.setupAction(--b.step)}}};if(void 0!==this._nextFormSettings)return void("next"===a?this._nextFormSettings.actions.NextAction():("prev"==a||"previous"==a)&&this._nextFormSettings.actions.PrevAction());if(void 0===a.next)throw new Error("Next(next) Button Needs to supplied");else b.next=a.next;if(void 0===a.prev)throw new Error("Previous(prev) Button Needs to supplied");else b.prev=a.prev;if(void 0===a.submit)throw new Error("Submit(submit) Button Needs to supplied");else b.submit=a.submit;if(b.max=b.that.find(".collapsible-body").length-1,-1===b.max)throw new Error("Collapsable needs to be coded in html, see http://materializecss.com/collapsible.html");b.setup=a.setup||b.setup,b.onSubmit=a.onSubmit||b.onSubmit,b.validate=a.validate||b.validate,b.prev.show(),b.next.show(),b.submit.show(),b.that.find("div.collapsible-header").click(function(){return!1}).css("cursor","default"),b.next.click(b.actions.NextAction),b.prev.click(b.actions.PrevAction),b.submit.click(async function(){return!!(await b.actions.validate())&&void(await a.onSubmit())}),this._nextFormSettings=b,b.actions.NextAction()})}});